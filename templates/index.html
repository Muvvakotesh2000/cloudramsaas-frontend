<!-- frontend/templates/index.html (UI-enhanced only — same IDs/structure/logic hooks preserved) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cloud RAM SaaS</title>

  <link rel="icon" type="image/x-icon" href="/static/favicon.ico">

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Existing app scripts -->
  <script src="/static/config.js" defer></script>
  <script src="/static/script.js" defer></script>

  <!-- ✅ UI Enhancements (no behavior changes) -->
  <style>
    :root{
      --bg0:#070A12;
      --bg1:#0A1022;
      --card:rgba(255,255,255,.07);
      --card2:rgba(255,255,255,.10);
      --border:rgba(255,255,255,.14);
      --muted:rgba(255,255,255,.72);
      --text:#F5F7FF;
      --accent:#36C2FF;
      --accent2:#7C5CFF;
      --danger:#FF5B5B;
      --ok:#30D989;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --shadow2: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
      --radius2: 14px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1100px 700px at 15% 20%, rgba(124,92,255,.25), transparent 55%),
        radial-gradient(900px 600px at 85% 15%, rgba(54,194,255,.22), transparent 55%),
        radial-gradient(700px 500px at 50% 85%, rgba(48,217,137,.12), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    /* Subtle grid */
    body::before{
      content:"";
      position:fixed; inset:0;
      background-image:
        linear-gradient(rgba(255,255,255,.045) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,.045) 1px, transparent 1px);
      background-size: 48px 48px;
      opacity:.35;
      pointer-events:none;
      mask-image: radial-gradient(circle at 50% 35%, rgba(0,0,0,1), rgba(0,0,0,.2) 70%, rgba(0,0,0,0) 100%);
    }

    #app{
      width:min(980px, 92vw);
      margin: 28px auto 44px;
    }

    /* Top nav */
    nav#nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      position: sticky;
      top: 14px;
      z-index: 10;
    }

    nav#nav::before{
      content:"CloudRAMSaaS";
      font-weight:700;
      letter-spacing:.2px;
      font-size: 14px;
      opacity:.9;
      margin-left: 6px;
      margin-right:auto;
    }

    nav#nav button{
      appearance:none;
      border:none;
      color:var(--text);
      background: rgba(255,255,255,.08);
      padding:10px 14px;
      border-radius: 999px;
      cursor:pointer;
      font-weight: 600;
      letter-spacing:.15px;
      transition: transform .12s ease, background .18s ease, box-shadow .18s ease;
      box-shadow: 0 6px 16px rgba(0,0,0,.25);
    }
    nav#nav button:hover{
      background: rgba(255,255,255,.12);
      transform: translateY(-1px);
    }
    nav#nav button:active{ transform: translateY(0); }
    nav#nav button:last-child{
      background: rgba(255,91,91,.18);
      border: 1px solid rgba(255,91,91,.25);
    }
    nav#nav button:last-child:hover{
      background: rgba(255,91,91,.24);
    }

    /* Page containers */
    #login-page, #register-page, #home-page, #allocate-page{
      margin-top: 22px;
      padding: 22px 22px;
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      position: relative;
      overflow:hidden;
    }

    #login-page::after, #register-page::after, #home-page::after, #allocate-page::after{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(700px 240px at 30% 0%, rgba(54,194,255,.18), transparent 60%),
                  radial-gradient(700px 240px at 80% 0%, rgba(124,92,255,.16), transparent 60%);
      pointer-events:none;
      opacity:.9;
    }

    /* Headings */
    h1{
      margin: 0 0 10px;
      font-size: 28px;
      letter-spacing: .2px;
      position:relative;
      z-index:1;
    }
    h1 + p, #home-page p, #allocate-page p{
      position:relative;
      z-index:1;
    }

    /* Form layout */
    form{
      margin-top: 14px;
      position:relative;
      z-index:1;
    }

    form > div{
      display:flex;
      flex-direction:column;
      gap: 8px;
      margin-bottom: 12px;
    }

    label{
      font-size: 13px;
      color: var(--muted);
      letter-spacing:.2px;
    }

    input[type="email"],
    input[type="password"],
    input[type="text"],
    input[type="tel"],
    select{
      width: min(520px, 100%);
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(7,10,18,.45);
      color: var(--text);
      outline: none;
      transition: border-color .18s ease, box-shadow .18s ease, transform .12s ease;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.15);
    }

    input::placeholder{ color: rgba(255,255,255,.45); }

    input:focus, select:focus{
      border-color: rgba(54,194,255,.55);
      box-shadow: 0 0 0 4px rgba(54,194,255,.18);
      transform: translateY(-1px);
    }

    /* Primary buttons (generic) */
    button{
      font-family: inherit;
    }

    /* Page action buttons in content */
    #login-page button,
    #register-page button,
    #allocate-page button{
      appearance:none;
      border:none;
      border-radius: 12px;
      padding: 12px 14px;
      cursor:pointer;
      font-weight: 700;
      letter-spacing:.15px;
      transition: transform .12s ease, filter .18s ease, background .18s ease, box-shadow .18s ease, opacity .18s ease;
      position:relative;
      z-index:1;
    }

    /* The "form submit" style button */
    #login-page form button,
    #register-page form button{
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #08101F;
      box-shadow: 0 14px 26px rgba(54,194,255,.18);
      width: min(520px, 100%);
    }
    #login-page form button:hover,
    #register-page form button:hover{
      filter: brightness(1.05);
      transform: translateY(-1px);
    }

    /* Secondary buttons */
    #login-page > button,
    #register-page > button{
      background: rgba(255,255,255,.08);
      color: var(--text);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 10px 18px rgba(0,0,0,.22);
      margin-right: 10px;
      margin-top: 10px;
    }
    #login-page > button:hover,
    #register-page > button:hover{
      background: rgba(255,255,255,.12);
      transform: translateY(-1px);
    }

    /* Home page copy */
    #home-page p{
      color: rgba(255,255,255,.82);
      margin: 8px 0;
      font-size: 14px;
    }
    #user-email{
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      display: inline-block;
      margin-top: 10px;
    }

    /* Allocate page instruction box */
    #allocate-page ul{
      margin: 10px 0 16px;
      padding-left: 20px;
      color: rgba(255,255,255,.82);
      font-size: 14px;
      position:relative;
      z-index:1;
    }
    #allocate-page li{
      margin: 6px 0;
    }

    /* Agent panel polish */
    #allocate-agent-panel{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)) !important;
      border: 1px solid rgba(255,255,255,.14) !important;
      box-shadow: 0 14px 32px rgba(0,0,0,.30);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      position:relative;
      z-index:1;
    }

    #allocate-agent-status{
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(0,0,0,.20);
      border: 1px solid rgba(255,255,255,.10);
      min-height: 42px;
      display:flex;
      align-items:center;
    }

    #allocate-install-run{
      background: linear-gradient(135deg, rgba(54,194,255,.95), rgba(124,92,255,.95));
      color: #08101F;
      box-shadow: 0 14px 26px rgba(124,92,255,.14);
      border: 0;
    }
    #allocate-install-run:hover{
      filter: brightness(1.05);
      transform: translateY(-1px);
    }

    #allocate-agent-retry{
      background: rgba(255,255,255,.09);
      border: 1px solid rgba(255,255,255,.14);
      color: var(--text);
    }
    #allocate-agent-retry:hover{
      background: rgba(255,255,255,.13);
      transform: translateY(-1px);
    }

    /* Allocate button */
    #allocate-btn{
      margin-top: 14px;
      background: linear-gradient(135deg, rgba(48,217,137,.95), rgba(54,194,255,.95));
      color: #071118;
      box-shadow: 0 16px 30px rgba(48,217,137,.14);
      min-width: 160px;
    }
    #allocate-btn:hover{
      filter: brightness(1.05);
      transform: translateY(-1px);
    }
    #allocate-btn:disabled{
      opacity: .45;
      cursor: not-allowed;
      transform: none !important;
      filter: none !important;
      box-shadow: none !important;
      background: rgba(255,255,255,.10);
      color: rgba(255,255,255,.70);
      border: 1px solid rgba(255,255,255,.16);
    }

    /* Loading / status */
    #loading-text{
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(54,194,255,.10);
      border: 1px solid rgba(54,194,255,.22);
      color: rgba(255,255,255,.92) !important;
      position:relative;
      z-index:1;
    }

    #status-message, #login-error, #register-error{
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(0,0,0,.20);
      border: 1px solid rgba(255,255,255,.10);
      position:relative;
      z-index:1;
    }
    #login-error:empty, #register-error:empty, #status-message:empty{
      display:none;
    }

    code{
      background: rgba(0,0,0,.28);
      padding: 3px 7px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.90);
    }

    /* Small-screen tweaks */
    @media (max-width: 560px){
      nav#nav{
        flex-wrap: wrap;
        border-radius: 18px;
      }
      nav#nav::before{
        width:100%;
        margin: 2px 6px 6px;
      }
      #login-page, #register-page, #home-page, #allocate-page{
        padding: 18px 16px;
      }
      h1{ font-size: 24px; }
      #login-page > button, #register-page > button{
        width: 100%;
        margin-right: 0;
      }
    }
  </style>
</head>

<body>
  <div id="app">
    <nav id="nav" style="display:none;">
      <button onclick="navigate('home')">Home</button>
      <button onclick="navigate('allocate')">Allocate RAM</button>
      <button onclick="logout()">Sign Out</button>
    </nav>

    <!-- Login Page -->
    <div id="login-page" style="display:block;">
      <h1>Login to Cloud RAM SaaS</h1>

      <form onsubmit="event.preventDefault(); login();">
        <div>
          <label>Email:</label>
          <input type="email" id="login-email" required autocomplete="email" placeholder="you@example.com" />
        </div>

        <div>
          <label>Password:</label>
          <input type="password" id="login-password" required autocomplete="current-password" placeholder="••••••••" />
        </div>

        <button type="button" onclick="login()">Login</button>
      </form>

      <button onclick="navigate('register')">Register</button>
      <button onclick="loginWithGoogle()">Login with Google</button>

      <p id="login-error" style="color:red;"></p>
    </div>

    <!-- Registration Page -->
    <div id="register-page" style="display:none;">
      <h1>Register for Cloud RAM SaaS</h1>

      <form onsubmit="event.preventDefault(); registerUser();">
        <div>
          <label>First Name:</label>
          <input type="text" id="register-firstname" required placeholder="First name" />
        </div>

        <div>
          <label>Last Name:</label>
          <input type="text" id="register-lastname" required placeholder="Last name" />
        </div>

        <div>
          <label>Phone Number:</label>
          <input type="tel" id="register-phone" required placeholder="(555) 123-4567" />
        </div>

        <div>
          <label>Email:</label>
          <input type="email" id="register-email" required placeholder="you@example.com" />
        </div>

        <div>
          <label>Password:</label>
          <input type="password" id="register-password" required placeholder="Create a strong password" />
        </div>

        <button type="submit">Register</button>
      </form>

      <button onclick="navigate('login')">Back to Login</button>
      <p id="register-error" style="color:red;"></p>
    </div>

    <!-- Home Page -->
    <div id="home-page" style="display:none;">
      <h1>Welcome to Cloud RAM SaaS</h1>
      <p>Use the navigation to allocate Cloud RAM.</p>
      <p id="user-email" style="font-weight:bold;"></p>
    </div>

    <!-- Allocate RAM Page -->
    <div id="allocate-page" style="display:none;">
      <h1>Cloud RAM Allocation</h1>

      <p><strong>Instructions:</strong></p>
      <ul>
        <li>After clicking Allocate, creating online Cloud RAM takes 10–15 minutes.</li>
        <li>Once you create RAM, it will be terminated if you close the browser tab.</li>
      </ul>

      <!-- Local Agent Panel -->
      <div id="allocate-agent-panel"
           style="margin:14px 0; padding:14px; border-radius:10px;
                  background: rgba(255,255,255,0.10);
                  border: 1px solid rgba(255,255,255,0.20);">

        <div style="font-weight:bold; font-size:16px;">
          Local Agent Required
        </div>

        <div style="margin-top:6px; font-size:13px; opacity:0.9;">
          You must run the Local Agent on this computer before allocating RAM.
          This enables secure task discovery and local sync.
        </div>

        <div id="allocate-agent-status"
             style="margin-top:10px; font-weight:bold;"></div>

        <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
          <button class="button"
                  id="allocate-install-run"
                  type="button">
            Install & Run Agent
          </button>

          <button class="button"
                  id="allocate-agent-retry"
                  type="button">
            Retry Agent
          </button>
        </div>

        <div style="margin-top:10px; font-size:13px; opacity:0.9;">
          Health check: <code>http://127.0.0.1:7071/health</code>
        </div>
      </div>

      <label>Choose RAM:</label>
      <select id="ram">
        <option value="1">1 GB</option>
        <option value="2">2 GB</option>
        <option value="4">4 GB</option>
      </select>

      <button id="allocate-btn" type="button" disabled>Allocate</button>

      <p id="loading-text" style="display:none; color:blue;">Processing...</p>
      <p id="status-message"></p>
    </div>
  </div>
</body>
</html>
