<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cloud RAM SaaS</title>

  <link rel="stylesheet" href="/static/style.css" />
  <link rel="icon" type="image/x-icon" href="/static/favicon.ico">

  <!-- ✅ Supabase JS SDK MUST be before script.js -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- ✅ Your SPA logic -->
   <script src="/static/config.js" defer></script>
  <script src="/static/script.js" defer></script>
</head>

<body>
  <div id="app">
    <nav id="nav" style="display:none;">
      <button onclick="navigate('home')">Home</button>
      <button onclick="navigate('allocate')">Allocate RAM</button>
      <button onclick="logout()">Sign Out</button>
    </nav>

    <!-- Login Page -->
    <div id="login-page" style="display:block;">
      <h1>Login to Cloud RAM SaaS</h1>

      <form onsubmit="event.preventDefault(); login();">
        <div>
          <label>Email:</label>
          <input type="email" id="login-email" required />
        </div>

        <div>
          <label>Password:</label>
          <input type="password" id="login-password" required />
        </div>

    <button type="button" onclick="login()">Login</button>
      </form>

      <button onclick="navigate('register')">Register</button>
      <button onclick="loginWithGoogle()">Login with Google</button>

      <p id="login-error" style="color:red;"></p>
    </div>

    <!-- Registration Page -->
    <div id="register-page" style="display:none;">
      <h1>Register for Cloud RAM SaaS</h1>

      <form onsubmit="event.preventDefault(); registerUser();">
        <div>
          <label>First Name:</label>
          <input type="text" id="register-firstname" required />
        </div>

        <div>
          <label>Last Name:</label>
          <input type="text" id="register-lastname" required />
        </div>

        <div>
          <label>Phone Number:</label>
          <input type="tel" id="register-phone" required />
        </div>

        <div>
          <label>Email:</label>
          <input type="email" id="register-email" required />
        </div>

        <div>
          <label>Password:</label>
          <input type="password" id="register-password" required />
        </div>

        <button type="submit">Register</button>
      </form>

      <button onclick="navigate('login')">Back to Login</button>
      <p id="register-error" style="color:red;"></p>
    </div>

    <!-- Home Page -->
    <div id="home-page" style="display:none;">
      <h1>Welcome to Cloud RAM SaaS</h1>
      <p>Use the navigation to allocate Cloud RAM.</p>
      <p id="user-email" style="font-weight:bold;"></p>
    </div>

    <!-- Allocate RAM Page -->
    <div id="allocate-page" style="display:none;">
      <h1>Cloud RAM Allocation</h1>
      <p><strong>Instructions:</strong></p>
      <ul>
        <li>After clicking Allocate, creating online Cloud RAM takes 10-15 minutes.</li>
        <li>Once you create RAM, it will be terminated if you close the browser tab.</li>
      </ul>

      <label>Choose RAM:</label>
      <select id="ram">
        <option value="1">1 GB</option>
        <option value="2">2 GB</option>
        <option value="4">4 GB</option>
      </select>

      <button id="allocate-btn" type="button">Allocate</button>
      <p id="loading-text" style="display:none; color:blue;">Processing...</p>
      <p id="status-message"></p>
    </div>
  </div>
</body>
</html>
